{% load static %}
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Reporte Conductual – {% if area == "bilingue" %}Bilingüe{% else %}Colegio/CFP{% endif %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <!-- Select2 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" />
    <!-- CSS personalizado -->
    <link rel="stylesheet" href="{% static 'conducta/css/conductual.css' %}">
</head>

<body>
    <div class="form-container">
        <h2>Reporte Conductual – {% if area == "bilingue" %}Bilingüe{% else %}Colegio/CFP{% endif %}</h2>
        {% if messages %}
        {% for message in messages %}
        <div class="alert alert-success" role="alert">{{ message }}</div>
        {% endfor %}
        {% endif %}
        <form method="post" autocomplete="off" id="formReporteConductual">
            {% csrf_token %}
            <!-- Estudiante y Grado -->
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="id_alumno" class="form-label">Estudiante:</label>
                    <select id="id_alumno" name="alumno" class="form-select" required>
                        <option value="">-- Selecciona un estudiante --</option>
                        {% for s in students %}
                        <option value="{{ s.id }}" data-grado="{{ s.grado }}">{{ s.label }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-md-6">
                    <label for="grado-display" class="form-label">Grado:</label>
                    <input type="text" id="grado-display" class="form-control" readonly>
                    <input type="hidden" name="grado" id="id_grado">
                </div>
            </div>

            <!-- Materia / Docente y Fecha -->
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="id_materia_docente" class="form-label">Materia / Docente:</label>
                    <select id="id_materia_docente" name="materia_docente" class="form-select" required>
                        <option value="">-- Selecciona una materia --</option>
                        {% for v, t in materia_docente_choices %}
                        <option value="{{ v }}">{{ t }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-md-6">
                    <label for="id_fecha" class="form-label">Fecha:</label>
                    <input type="date" id="id_fecha" name="fecha" class="form-control" value="{{ fecha }}" required>
                </div>
            </div>

<!-- Severidad e Incisos -->
<div class="row mb-3 severidad-row">
    <!-- Leve -->
    <div class="col-md-4">
        <div class="form-check mb-1">
            <input class="form-check-input" type="checkbox" id="chk_leve" name="chk_leve">
            <label class="form-check-label" for="chk_leve">Leve</label>
        </div>
        <select id="inciso_leve" name="inciso_leve[]" class="form-select" multiple disabled>
            {% for inciso in incisos_leve %}
            <option value="{{ inciso.id }}">{{ inciso.descripcion }}</option>
            {% endfor %}
        </select>
        
    </div>
    <!-- Grave -->
    <div class="col-md-4">
        <div class="form-check mb-1">
            <input class="form-check-input" type="checkbox" id="chk_grave" name="chk_grave">
            <label class="form-check-label" for="chk_grave">Grave</label>
        </div>
        <select id="inciso_grave" name="inciso_grave[]" class="form-select" multiple disabled>
            {% for inciso in incisos_grave %}
            <option value="{{ inciso.id }}">{{ inciso.descripcion }}</option>
            {% endfor %}
        </select>
        
    </div>
    <!-- Muy grave -->
    <div class="col-md-4">
        <div class="form-check mb-1">
            <input class="form-check-input" type="checkbox" id="chk_muygrave" name="chk_muygrave">
            <label class="form-check-label" for="chk_muygrave">Muy grave</label>
        </div>
        <select id="inciso_muygrave" name="inciso_muygrave[]" class="form-select" multiple disabled>
            {% for inciso in incisos_muygrave %}
            <option value="{{ inciso.id }}">{{ inciso.descripcion }}</option>
            {% endfor %}
        </select>
        
    </div>
</div>


            <!-- Comentario -->
            <div class="mb-3">
                <label for="id_comentario" class="form-label">Comentario:</label>
                <textarea id="id_comentario" name="comentario" rows="3" class="form-control" required></textarea>
            </div>

            <button type="submit" class="btn btn-primary w-100">Guardar Reporte</button>
        </form>
        <a class="btn-dashboard text-center mt-4" href="/conducta/dashboard/maestro/">
            &larr; Regresar al Dashboard
        </a>
    </div>
    <!-- JS -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="{% static 'conducta/js/conductual.js' %}"></script>
</body>

</html>