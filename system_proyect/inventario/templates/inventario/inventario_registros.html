{% load static %}
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Registros de Inventario</title>

    <link rel="shortcut icon" href="{% static 'accounts/img/nuevo.ico' %}" type="image/x-icon" />

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <!-- DataTables -->
    <link href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap5.min.css" rel="stylesheet">

    <link rel="stylesheet" href="{% static 'accounts/css/menu.css' %}">
</head>

<body>
<div class="d-flex" id="wrapper">

    <!-- ─────── SIDEBAR ─────── -->
    <nav class="bg-dark text-white sidebar flex-shrink-0 p-3" style="min-width:220px;">
    <div class="d-flex align-items-center mb-3">
      <img src="{% static 'accounts/img/ana-transformed.png' %}" alt="Logo" style="width:42px;" class="me-2">
      <span class="fs-5 fw-bold">TechCare</span>
    </div>

    <hr class="text-secondary">
    <ul class="nav nav-pills flex-column mb-auto">

      <li>
        <a href="{% url 'inventario:inventario_computadoras' %}" class="nav-link text-white">
          <i class="fa-solid fa-desktop me-2"></i> Computadoras
        </a>
      </li>

      <li>
        <a href="{% url 'inventario:inventario_televisores' %}" class="nav-link text-white">
          <i class="fa-solid fa-tv me-2"></i> Televisores
        </a>
      </li>

      <li>
        <a href="{% url 'inventario:inventario_impresoras' %}" class="nav-link text-white">
          <i class="fa-solid fa-print me-2"></i> Impresoras
        </a>
      </li>

      <li>
        <a href="{% url 'inventario:inventario_routers' %}" class="nav-link text-white">
          <i class="fa-solid fa-wifi me-2"></i> Routers
        </a>
      </li>

      <li>
        <a href="{% url 'inventario:inventario_datashows' %}" class="nav-link text-white">
          <i class="fa-solid fa-video me-2"></i> DataShows
        </a>
      </li>

      <!-- ✅ NUEVO MÓDULO: MONITORES -->
      <li>
        <a href="{% url 'inventario:inventario_monitores' %}" class="nav-link text-white">
          <i class="fa-solid fa-display me-2"></i> Monitores
        </a>
      </li>

      <li>
        <a href="{% url 'inventario:inventario_por_categoria' %}" class="nav-link text-white">
          <i class="fa-solid fa-layer-group me-2"></i> Por Categoría
        </a>
      </li>

      <li>
        <a href="{% url 'inventario:inventario_registros' %}" class="nav-link text-white">
          <i class="fa-solid fa-clipboard-list me-2"></i> Ver registros
        </a>
      </li>

      <li>
        <a href="{% url 'inventario:dashboard' %}" class="nav-link text-white">
          <i class="fa-solid fa-house me-2"></i> Volver al menú
        </a>
      </li>

    </ul>

    <hr class="text-secondary">

    <div class="dropdown">
      <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" data-bs-toggle="dropdown">
        <img src="{% static 'accounts/img/user.png' %}" width="32" height="32" class="rounded-circle me-2">
        <strong>{{ request.user.username }}</strong>
      </a>

      <ul class="dropdown-menu dropdown-menu-dark text-small shadow">
        <li><a class="dropdown-item" href="{% url 'logout' %}">
          <i class="fa fa-sign-out-alt me-2"></i> Cerrar Sesión</a>
        </li>
      </ul>
    </div>
  </nav>

    <!-- ─────── MAIN CONTENT ─────── -->
    <div class="flex-grow-1 d-flex flex-column">

        <nav class="navbar bg-white shadow-sm px-3">
            <span class="fs-4">Inventario – Registros</span>
        </nav>

        <div class="container my-4">
            <!-- ─────── TABS ─────── -->
            <ul class="nav nav-tabs mb-3" id="inventarioTabs">
                <li class="nav-item"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabComputadoras">Computadoras</button></li>
                <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#tabImpresoras">Impresoras</button></li>
                <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#tabTelevisores">Televisores</button></li>
                <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#tabRouters">Routers</button></li>
                <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#tabDataShows">DataShows</button></li>
                <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#tabMonitores">Monitores</button></li>
            </ul>

            <div class="tab-content">

                <!-- ────────────────── COMPUTADORAS ────────────────── -->
                <div class="tab-pane fade show active" id="tabComputadoras">
                    <h5 class="mb-3">Computadoras Registradas</h5>
                    <div class="table-responsive">
                        <table id="tablaComputadoras" class="table table-striped table-bordered align-middle">
                            <thead class="table-light">
                                <tr>
                                    <th>ID</th>
                                    <th>Modelo</th>
                                    <th>Serie</th>
                                    <th>Asignado</th>
                                    <th>Área</th>
                                    <th>Grupo</th>
                                    <th>QR</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for c in computadoras %}
                                <tr>
                                    <td>{{ c.asset_id }}</td>
                                    <td>{{ c.modelo }}</td>
                                    <td>{{ c.serie }}</td>
                                    <td>{{ c.asignado_a }}</td>
                                    <td>{{ c.area }}</td>
                                    <td>
                                        {% if c.grupo %}
                                            Grupo {{ c.grupo }}
                                        {% else %}
                                            <span class="text-muted">Sin grupo</span>
                                        {% endif %}
                                    </td>
                                    <td>
                                        <a href="{% url 'inventario:descargar_qr' 'computadora' c.id %}" class="btn btn-sm btn-outline-secondary">
                                            <i class="bi bi-qr-code"></i>
                                        </a>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ────────────────── IMPRESORAS ────────────────── -->
                <div class="tab-pane fade" id="tabImpresoras">
                    <h5 class="mb-3">Impresoras Registradas</h5>
                    <div class="table-responsive">
                        <table id="tablaImpresoras" class="table table-striped table-bordered align-middle">
                            <thead class="table-light">
                                <tr>
                                    <th>ID</th>
                                    <th>Nombre</th>
                                    <th>Modelo</th>
                                    <th>Serie</th>
                                    <th>Asignado</th>
                                    <th>Nivel Tinta</th>
                                    <th>QR</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for i in impresoras %}
                                <tr>
                                    <td>{{ i.asset_id }}</td>
                                    <td>{{ i.nombre }}</td>
                                    <td>{{ i.modelo }}</td>
                                    <td>{{ i.serie }}</td>
                                    <td>{{ i.asignado_a }}</td>
                                    <td>{{ i.nivel_tinta }}</td>
                                    <td>
                                        <a href="{% url 'inventario:descargar_qr' 'impresora' i.id %}" class="btn btn-sm btn-outline-secondary">
                                            <i class="bi bi-qr-code"></i>
                                        </a>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ────────────────── TELEVISores ────────────────── -->
                <div class="tab-pane fade" id="tabTelevisores">
                    <h5 class="mb-3">Televisores Registrados</h5>
                    <div class="table-responsive">
                        <table id="tablaTelevisores" class="table table-striped table-bordered align-middle">
                            <thead class="table-light">
                                <tr>
                                    <th>ID</th>
                                    <th>Modelo</th>
                                    <th>Serie</th>
                                    <th>Área</th>
                                    <th>Grado</th>
                                    <th>QR</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for t in televisores %}
                                <tr>
                                    <td>{{ t.asset_id }}</td>
                                    <td>{{ t.modelo }}</td>
                                    <td>{{ t.serie }}</td>
                                    <td>{{ t.area }}</td>
                                    <td>{{ t.grado }}</td>
                                    <td>
                                        <a href="{% url 'inventario:descargar_qr' 'televisor' t.id %}" class="btn btn-sm btn-outline-secondary">
                                            <i class="bi bi-qr-code"></i>
                                        </a>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ────────────────── ROUTERS ────────────────── -->
                <div class="tab-pane fade" id="tabRouters">
                    <h5 class="mb-3">Routers Registrados</h5>
                    <div class="table-responsive">
                        <table id="tablaRouters" class="table table-striped table-bordered align-middle">
                            <thead class="table-light">
                                <tr>
                                    <th>ID</th>
                                    <th>Modelo</th>
                                    <th>Serie</th>
                                    <th>Ubicado</th>
                                    <th>IP Uso</th>
                                    <th>QR</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for r in routers %}
                                <tr>
                                    <td>{{ r.asset_id }}</td>
                                    <td>{{ r.modelo }}</td>
                                    <td>{{ r.serie }}</td>
                                    <td>{{ r.ubicado }}</td>
                                    <td>{{ r.ip_uso }}</td>
                                    <td>
                                        <a href="{% url 'inventario:descargar_qr' 'router' r.id %}" class="btn btn-sm btn-outline-secondary">
                                            <i class="bi bi-qr-code"></i>
                                        </a>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ────────────────── DATASHOWS ────────────────── -->
                <div class="tab-pane fade" id="tabDataShows">
                    <h5 class="mb-3">DataShows Registrados</h5>
                    <div class="table-responsive">
                        <table id="tablaDataShows" class="table table-striped table-bordered align-middle">
                            <thead class="table-light">
                                <tr>
                                    <th>ID</th>
                                    <th>Nombre</th>
                                    <th>Modelo</th>
                                    <th>Serie</th>
                                    <th>Estado</th>
                                    <th>QR</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for d in datashows %}
                                <tr>
                                    <td>{{ d.asset_id }}</td>
                                    <td>{{ d.nombre }}</td>
                                    <td>{{ d.modelo }}</td>
                                    <td>{{ d.serie }}</td>
                                    <td>{{ d.estado }}</td>
                                    <td>
                                        <a href="{% url 'inventario:descargar_qr' 'datashow' d.id %}" class="btn btn-sm btn-outline-secondary">
                                            <i class="bi bi-qr-code"></i>
                                        </a>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ────────────────── MONITORES ────────────────── -->
                <div class="tab-pane fade" id="tabMonitores">
                    <h5 class="mb-3">Monitores Registrados</h5>
                    <div class="table-responsive">
                        <table id="tablaMonitores" class="table table-striped table-bordered align-middle">
                            <thead class="table-light">
                                <tr>
                                    <th>ID</th>
                                    <th>Modelo</th>
                                    <th>Serie</th>
                                    <th>Asignado</th>
                                    <th>QR</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for m in monitores %}
                                <tr>
                                    <td>{{ m.asset_id }}</td>
                                    <td>{{ m.modelo }}</td>
                                    <td>{{ m.serie }}</td>
                                    <td>{{ m.asignado_a }}</td>
                                    <td>
                                        <a href="{% url 'inventario:descargar_qr' 'monitor' m.id %}" class="btn btn-sm btn-outline-secondary">
                                            <i class="bi bi-qr-code"></i>
                                        </a>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>

            <div class="text-center mt-3">
                <a href="{% url 'inventario:dashboard' %}" class="btn btn-secondary">Volver al Dashboard</a>
            </div>

            <div class="text-center mt-3 text-muted">
                © {{ year }} Soporte Técnico – Asociación Nuevo Amanecer
            </div>

        </div>
    </div>
</div>

<!-- ─────── SCRIPTS ─────── -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap5.min.js"></script>

<script>
    function iniciarTabla(idTabla) {
        $('#' + idTabla).DataTable({
            pageLength: 25,
            responsive: true,
            language: { url: "https://cdn.datatables.net/plug-ins/1.13.4/i18n/es-ES.json" }
        });
    }

    document.addEventListener("DOMContentLoaded", () => {
        iniciarTabla("tablaComputadoras");
        iniciarTabla("tablaImpresoras");
        iniciarTabla("tablaTelevisores");
        iniciarTabla("tablaRouters");
        iniciarTabla("tablaDataShows");
        iniciarTabla("tablaMonitores");
    });
</script>

</body>
</html>
