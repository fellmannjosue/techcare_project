{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Inventario – Monitores</title>

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- DataTables -->
<link href="https://cdn.datatables.net/1.13.8/css/dataTables.bootstrap5.min.css" rel="stylesheet">
<link href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.bootstrap5.min.css" rel="stylesheet">

<link rel="stylesheet" href="{% static 'accounts/css/menu.css' %}">
<style>
    body { background-color: #eef2f7; font-family: 'Segoe UI', sans-serif; }
    .form-card { max-width: 540px; margin: 1rem auto; padding: 1.5rem;
                 background: #fff; border-radius: 0.75rem;
                 box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.1); }
</style>
</head>

<body>
<div class="d-flex" id="wrapper">

    <!-- Sidebar CONSISTENTE -->
 <nav class="bg-dark text-white sidebar flex-shrink-0 p-3" style="min-width:220px;">
    <div class="d-flex align-items-center mb-3">
      <img src="{% static 'accounts/img/ana-transformed.png' %}" alt="Logo" style="width:42px;" class="me-2">
      <span class="fs-5 fw-bold">TechCare</span>
    </div>

    <hr class="text-secondary">
    <ul class="nav nav-pills flex-column mb-auto">

      <li>
        <a href="{% url 'inventario:inventario_computadoras' %}" class="nav-link text-white">
          <i class="fa-solid fa-desktop me-2"></i> Computadoras
        </a>
      </li>

      <li>
        <a href="{% url 'inventario:inventario_televisores' %}" class="nav-link text-white">
          <i class="fa-solid fa-tv me-2"></i> Televisores
        </a>
      </li>

      <li>
        <a href="{% url 'inventario:inventario_impresoras' %}" class="nav-link text-white">
          <i class="fa-solid fa-print me-2"></i> Impresoras
        </a>
      </li>

      <li>
        <a href="{% url 'inventario:inventario_routers' %}" class="nav-link text-white">
          <i class="fa-solid fa-wifi me-2"></i> Routers
        </a>
      </li>

      <li>
        <a href="{% url 'inventario:inventario_datashows' %}" class="nav-link text-white">
          <i class="fa-solid fa-video me-2"></i> DataShows
        </a>
      </li>

      <!-- ✅ NUEVO MÓDULO: MONITORES -->
      <li>
        <a href="{% url 'inventario:inventario_monitores' %}" class="nav-link text-white">
          <i class="fa-solid fa-display me-2"></i> Monitores
        </a>
      </li>

      <li>
        <a href="{% url 'inventario:inventario_por_categoria' %}" class="nav-link text-white">
          <i class="fa-solid fa-layer-group me-2"></i> Por Categoría
        </a>
      </li>

      <li>
        <a href="{% url 'inventario:inventario_registros' %}" class="nav-link text-white">
          <i class="fa-solid fa-clipboard-list me-2"></i> Ver registros
        </a>
      </li>

      <li>
        <a href="{% url 'inventario:dashboard' %}" class="nav-link text-white">
          <i class="fa-solid fa-house me-2"></i> Volver al menú
        </a>
      </li>

    </ul>

    <hr class="text-secondary">

    <div class="dropdown">
      <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" data-bs-toggle="dropdown">
        <img src="{% static 'accounts/img/user.png' %}" width="32" height="32" class="rounded-circle me-2">
        <strong>{{ request.user.username }}</strong>
      </a>

      <ul class="dropdown-menu dropdown-menu-dark text-small shadow">
        <li><a class="dropdown-item" href="{% url 'logout' %}">
          <i class="fa fa-sign-out-alt me-2"></i> Cerrar Sesión</a>
        </li>
      </ul>
    </div>
  </nav>

    <!-- MAIN -->
    <div class="flex-grow-1 d-flex flex-column min-vh-100">
        <nav class="navbar navbar-light bg-white shadow-sm px-3">
            <span class="fs-4">Inventario – Monitores</span>
        </nav>

        <div class="container-fluid py-4">

            <div class="row">

                <!-- FORMULARIO -->
                <div class="col-lg-5">
                    <div class="form-card">
                        <h5 class="text-center text-dark">Registrar Monitor</h5>

                        <form method="post" novalidate>
                            {% csrf_token %}

                            {{ form.non_field_errors }}

                            {% for field in form %}
                                <div class="mb-3">
                                    <label class="form-label">{{ field.label }}</label>
                                    {{ field }}
                                    {% for err in field.errors %}
                                        <div class="text-danger small">{{ err }}</div>
                                    {% endfor %}
                                </div>
                            {% endfor %}

                            <button class="btn btn-dark w-100 mt-3">Guardar Monitor</button>
                        </form>
                    </div>
                </div>

                <!-- TABLA -->
                <div class="col-lg-7">
                    <h5 class="mb-3">Monitores Registrados</h5>

                    <div class="table-responsive shadow-sm">
                        <table id="monitores-table" class="table table-bordered table-hover align-middle nowrap" style="width:100%;">
                            <thead class="table-dark">
                                <tr>
                                    <th>ID</th>
                                    <th>Asset ID</th>
                                    <th>Modelo</th>
                                    <th>Serie</th>
                                    <th>Laboratorio</th>
                                    <th>Asignado a</th>
                                    <th>Categoría</th>
                                    <th>Observaciones</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>

                            <tbody>
                                {% for m in monitores %}
                                <tr>
                                    <td>{{ m.id }}</td>
                                    <td>{{ m.asset_id }}</td>
                                    <td>{{ m.modelo }}</td>
                                    <td>{{ m.serie }}</td>
                                    <td>{{ m.laboratorio }}</td>
                                    <td>{{ m.asignado_a }}</td>
                                    <td>{{ m.category }}</td>
                                    <td>{{ m.observaciones }}</td>
                                    <td>
                                        <a href="{% url 'inventario:edit_monitor' m.id %}" class="btn btn-sm btn-primary">Editar</a>
                                        <a href="{% url 'inventario:delete_monitor' m.id %}"
                                           class="btn btn-sm btn-danger"
                                           onclick="return confirm('¿Eliminar este monitor?');">
                                           Eliminar
                                        </a>
                                        <a href="{% url 'inventario:ver_monitor' m.id %}" class="btn btn-sm btn-secondary">Ver</a>
                                    </td>
                                </tr>
                                {% empty %}
                                <tr>
                                    <td colspan="9" class="text-center">No hay monitores registrados.</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>

                </div>

            </div>

        </div>
    </div>

</div>

<!-- SCRIPTS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.8/js/dataTables.bootstrap5.min.js"></script>

<script>
    $(function(){
        $('#monitores-table').DataTable({
            responsive: true,
            pageLength: 10,
            order: [[0, "desc"]],
            language: { url: "https://cdn.datatables.net/plug-ins/1.13.4/i18n/es-ES.json" }
        });
    });
</script>

</body>
</html>
